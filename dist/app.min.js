"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a11yActivate(e,t){var r=[" "];"BUTTON"===e.tagName&&(r=[" "]),e.addEventListener("click",t),e.addEventListener("keyup",function(e){-1<r.indexOf(e.key)&&t(e)})}function addNavListener(){var e=document.getElementById("nav-menu"),t=document.querySelector("header"),r=document.querySelectorAll("#top-nav li");e.addEventListener("click",function(){t.classList.toggle("open")}),r.forEach(function(t){t.addEventListener("click",function(e){document.querySelector("#top-nav li.current").classList.remove("current"),t.classList.add("current")})})}function addCardListeners(){var e=document.querySelectorAll(".card"),t=document.querySelectorAll(".skip-card"),r=document.querySelectorAll(".play-video");_toConsumableArray(e).forEach(function(t){t.setAttribute("tabindex","0"),addCardKeyboardControls(t,e),t.addEventListener("click",function(e){setActive(t)})}),_toConsumableArray(t).forEach(function(e){a11yActivate(e,skipCard)}),_toConsumableArray(r).forEach(function(e){a11yActivate(e,playVimeo)})}function closeTranscripts(){document.querySelectorAll(".transcript").forEach(function(e){e.classList.add("closed")}),document.querySelectorAll(".transcript-toggle").forEach(function(e){e.setAttribute("aria-expanded","false")})}function playVimeo(e){e.stopPropagation();var t=e.target.parentElement.querySelector(".vimeo");for(var r in vimeoPlayers)vimeoPlayers[r].element==t&&vimeoPlayers[r].play()}function addCardKeyboardControls(n,a){n.addEventListener("keyup",function(e){switch(e.key){case"Enter":if(e.target.classList.contains("transcript-toggle"))break;case" ":e.preventDefault(),setActive(n);break;case"Escape":setActive();break;case"Home":e.preventDefault(),setActive(a[0]);break;case"End":e.preventDefault(),setActive(a[a.length-1]);break;case"ArrowRight":if(a[a.length-1]!==n){var t=n.nextElementSibling;t.focus(),setActive(t)}break;case"ArrowLeft":if(a[0]!==n){var r=n.previousElementSibling;r.focus(),setActive(r)}}})}function skipCard(e){e.preventDefault(),e.stopPropagation();var t=e.target.hash.substring(1),r=document.getElementById(t);r.focus(),setActive(r)}function setActive(e){closeTranscripts(),stopAllVimeo();var t=document.getElementById("close-cards-button");(_toConsumableArray(document.querySelectorAll(".active")).forEach(function(e){e.classList.remove("active"),e.setAttribute("aria-expanded","false")}),e)?(_toConsumableArray(document.querySelectorAll(".no-active")).forEach(function(e){e.classList.remove("no-active"),e.classList.add("has-active")}),e.classList.add("active"),e.setAttribute("aria-expanded","true"),t.tabIndex=0):(_toConsumableArray(document.querySelectorAll(".has-active")).forEach(function(e){e.classList.remove("has-active"),e.classList.add("no-active")}),t.tabIndex=-1)}window.onload=function(){document.querySelector("html").classList.remove("no-js"),addNavListener(),addCardListeners(),addTranscripts()},window.addEventListener("keydown",function(e){this.document.activeElement.classList.contains("card")&&" "==e.key&&e.preventDefault()});var vimeoPlayers=createVimeoPlayers();function createVimeoPlayers(){for(var e=document.querySelectorAll(".vimeo"),t=[],r=0;r<e.length;r++){var n=new Vimeo.Player(e[r]);t.push(n)}return t}function stopAllVimeo(){vimeoPlayers.forEach(function(e){return e.pause()})}function addTranscripts(){for(var e=document.querySelectorAll(".transcript-toggle"),t=0;t<e.length;t++)a11yActivate(e[t],toggleTranscript)}function toggleTranscript(e){e.stopPropagation(),e.preventDefault();var t=e.target.getAttribute("aria-expanded");t="true"==t?"false":"true",e.target.setAttribute("aria-expanded",t),e.target.nextElementSibling.classList.toggle("closed")}function nextQuestion(){var e=document.querySelector(".question.active"),t=e.querySelector("input:checked");t?(checkAnswer(t),e.classList.remove("active"),e.nextElementSibling?e.nextElementSibling.classList.add("active"):alert("all done!")):alert("Please choose an answer")}function checkAnswer(e){var t=new XMLHttpRequest;t.open("GET","./game/tech-game.php?".concat(e.name,"=").concat(e.value)),t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(console.log("success",t.responseText),"Correct"===t.responseText?alert("correct!"):alert("incorrect")):console.error("HTTP error",t.status,t.statusText))},t.send("some shit")}function has_id(e){try{document.getElementById(e).value}catch(e){return!1}return!0}function has_name(e){try{cfrm.nm.type}catch(e){return!1}return!0}function $$(e){return has_id(e)||has_name(e)?has_id(e)?document.getElementById(e).value:void 0:(alert("Field "+e+" does not exist!\n Form validation configuration error."),!1)}function $val(e){return document.getElementById(e)}function trim(e){$val(e).value=$val(e).value.replace(/^\s+/,"").replace(/\s+$/,"")}!function(){var a=null,i=0,o=null,s=0,c=window,l=document,u=l.documentElement,d=l.body;function f(){i&&(clearTimeout(i),i=0,a.classList.remove("flying-focus_visible"),o.classList.remove("flying-focus_target"),o=null)}u.addEventListener("keydown",function(e){var t=e.which;(9===t||36<t&&t<41)&&(s=Date.now())},!1),u.addEventListener("focus",function(e){var t=e.target;if("flying-focus"!==t.id){var r=!1;a||(r=!0,(a=l.createElement("flying-focus")).id="flying-focus",a.style.transitionDuration=a.style.WebkitTransitionDuration="0.15s",d.appendChild(a));var n=function(e){var t=e.getBoundingClientRect(),r=u.clientLeft||d.clientLeft,n=u.clientTop||d.clientTop,a=c.pageXOffset||u.scrollLeft||d.scrollLeft,i=c.pageYOffset||u.scrollTop||d.scrollTop,o=t.left+a-r;return{top:t.top+i-n||0,left:o||0}}(t);a.style.left=n.left+"px",a.style.top=n.top+"px",a.style.width=t.offsetWidth+"px",a.style.height=t.offsetHeight+"px",!r&&Date.now()-s<42&&(f(),t.classList.add("flying-focus_target"),a.classList.add("flying-focus_visible"),o=t,i=setTimeout(f,150))}},!0),u.addEventListener("blur",function(){f()},!0);var e=l.createElement("style");e.textContent="#flying-focus {\tposition: absolute;\tmargin: 0;\tbackground: transparent;\t-webkit-transition-property: left, top, width, height;\ttransition-property: left, top, width, height;\t-webkit-transition-timing-function: cubic-bezier(0,1,0,1);\ttransition-timing-function: cubic-bezier(0,1,0,1);\tvisibility: hidden;\tpointer-events: none;\tbox-shadow: 0 0 2px 3px #78aeda, 0 0 2px #78aeda inset; border-radius: 2px;}#flying-focus.flying-focus_visible {\tvisibility: visible;\tz-index: 9999;}.flying-focus_target {\toutline: none !important; /* Doesn't work in Firefox :( */}/* http://stackoverflow.com/questions/71074/how-to-remove-firefoxs-dotted-outline-on-buttons-as-well-as-links/199319 */.flying-focus_target::-moz-focus-inner {\tborder: 0 !important;}/* Replace it with @supports rule when browsers catch up */@media screen and (-webkit-min-device-pixel-ratio: 0) {\t#flying-focus {\t\tbox-shadow: none;\t\toutline: 5px auto -webkit-focus-ring-color;\t\toutline-offset: -3px;\t}}",d.appendChild(e)}();var required={field:[],add:function(e,t,r){this.field[this.field.length]=[e,t,r]},out:function(){return this.field},clear:function(){this.field=[]}},validate={check:function(e){for(var t="Please fix the following errors:\n\n",r="",n=!0,a=0;a<required.field.length;a++)this.checkit(required.field[a][0],required.field[a][1],e)||(t=t+required.field[a][2]+" must be supplied\n",has_id(required.field[a][0])&&0===r.length&&(r=required.field[a][0]),n=!1);return n||alert(t),0<r.length&&document.getElementById(r).focus(),n},checkit:function(e,t,r){return"NOT_EMPTY"==t?!(this.trim($$(e)).length<1):"EMAIL"==t?(exp=/^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,null!=$$(e).match(exp)):void 0},trim:function(e){return 0<e.length?e.replace(/^\s+/,"").replace(/\s+$/,""):e}};